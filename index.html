<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>S.P.A.R.K. Academy</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div class="logo">S.P.A.R.K. Academy</div>
    <select class="lang" onchange="changeLanguage(this.value)">
        <option value="ru">Русский</option>
        <option value="en">English</option>
        <option value="ua">Українська</option>
    </select>
</header>

<main>
    
    <div class="glass">
        <h1 id="title">Добро пожаловать в S.P.A.R.K. Academy!</h1>
        <p id="description">Учите английский легко и интересно. Начните обучение прямо сейчас!</p>
        <div class="cta">
            <button onclick="openForm('student')"><span id="btnStudent">Записаться на курсы</span></button>
            <button onclick="openForm('teacher')"><span id="btnTeacher">Стать учителем</span></button>
        </div>
    </div>
    
    <section class="about glass">
        <h2>О S.P.A.R.K. Academy</h2>
        <p>
            S.P.A.R.K. Academy — это новая инновационная онлайн-школа английского языка.
            Мы объединяем современных учеников и талантливых учителей, создавая удобную,
            современную и практичную среду для обучения.
        </p>
        <p>
            Наша миссия — сделать изучение английского доступным, интересным и полезным
            для каждого. После завершения обучения выпускники получают официальный сертификат,
            подтверждающий их результаты и участие в программе.
        </p>
        <p>
            Присоединяйтесь как ученик или станьте учителем — школа активно растёт
            и открыта для новых участников.
        </p>
    </section>

</main>

<div class="form-popup" id="form-popup">
    <button class="close-btn" onclick="closeForm()">✖</button>
    <h2 id="form-title" class="drag-handle">Форма</h2>
    <form id="sparkForm" action="https://formspree.io/f/xgvrpljy" method="POST">
        <input type="text" name="name" id="name" placeholder="ФИО" required>
        <input type="tel" name="phone" id="phone" placeholder="Номер телефона" required>
        <input type="email" name="_replyto" id="email" placeholder="Email" required>
        <input type="text" name="telegram" id="telegram" placeholder="Telegram username" required>
        <button class="submit-btn" type="submit">Отправить</button>
    </form>
</div>

<footer>
    <a href="https://t.me/sparkenglishe" target="_blank" class="social">Telegram</a>
    <a href="https://www.tiktok.com/@spark_english?_r=1&_t=ZM-91QiAnjY2n5" target="_blank" class="social">TikTok</a>
</footer>

<script>
const texts = {
    ru: { title:"Добро пожаловать в S.P.A.R.K. Academy!", description:"Учите английский легко и интересно. Начните обучение прямо сейчас!", btnStudent:"Записаться на курсы", btnTeacher:"Стать учителем", formStudent:"Записаться на курсы", formTeacher:"Стать учителем" },
    en: { title:"Welcome to S.P.A.R.K. Academy!", description:"Learn English easily and interestingly. Start learning now!", btnStudent:"Enroll in Courses", btnTeacher:"Become a Teacher", formStudent:"Enroll in Courses", formTeacher:"Become a Teacher" },
    ua: { title:"Ласкаво просимо до S.P.A.R.K. Academy!", description:"Вивчайте англійську легко та цікаво. Почніть навчання прямо зараз!", btnStudent:"Записатися на курси", btnTeacher:"Стати вчителем", formStudent:"Записатися на курси", formTeacher:"Стати вчителем" }
};

function changeLanguage(lang){
    document.getElementById('title').innerText = texts[lang].title;
    document.getElementById('description').innerText = texts[lang].description;
    document.getElementById('btnStudent').innerText = texts[lang].btnStudent;
    document.getElementById('btnTeacher').innerText = texts[lang].btnTeacher;

    const formPopup = document.getElementById('form-popup');
    if(formPopup.style.display === 'block') {
        const type = formPopup.dataset.type;
        document.getElementById('form-title').innerText =
            type === 'student' ? texts[lang].formStudent : texts[lang].formTeacher;
    }
}

function openForm(type){
    const formPopup = document.getElementById('form-popup');
    formPopup.style.display = 'block';
    formPopup.dataset.type = type;

    // Сбросить позицию на центр при открытии (важно после перетаскивания)
    formPopup.style.top = '50%';
    formPopup.style.left = '50%';
    formPopup.style.transform = 'translate(-50%, -50%)';

    const lang = document.querySelector('.lang').value;
    document.getElementById('form-title').innerText =
        type === 'student' ? texts[lang].formStudent : texts[lang].formTeacher;
}

function closeForm(){
    document.getElementById('form-popup').style.display = 'none';
}

document.getElementById('sparkForm').addEventListener('submit', async function(e){
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);

    const response = await fetch(form.action, {
        method: form.method,
        body: data,
        headers: { 'Accept': 'application/json' }
    });

    if (response.ok) {
        alert('Спасибо! Ваша заявка отправлена.');
        form.reset();
        closeForm();
    } else {
        alert('Ошибка при отправке. Попробуйте позже.');
    }
});


// --- ЛОГИКА ДЛЯ ПЛАВНОГО ПЕРЕТАСКИВАНИЯ (ДРАГ-Н-ДРОП) ---
function makeDraggable(element, handle) {
    let pos3 = 0, pos4 = 0;
    
    // Перетаскивание только для устройств без сенсорного ввода (для ПК)
    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
    
    if (isTouchDevice) {
        return;
    }

    handle.onmousedown = dragMouseDown;

    function dragMouseDown(e) {
        e = e || window.event;
        e.preventDefault();
        
        // Переводим из 'fixed' в 'absolute' и устанавливаем текущую позицию
        if (element.style.position !== 'absolute') {
             const rect = element.getBoundingClientRect();
             element.style.position = "absolute";
             element.style.top = rect.top + 'px';
             element.style.left = rect.left + 'px';
             element.style.removeProperty('transform');
        }

        // Получаем начальные координаты мыши
        pos3 = e.clientX;
        pos4 = e.clientY;
        
        document.onmouseup = closeDragElement;
        document.onmousemove = elementDrag;
    }

    function elementDrag(e) {
        e = e || window.event;
        e.preventDefault();
        
        // Вычисляем смещение и обновляем позицию
        const dx = e.clientX - pos3;
        const dy = e.clientY - pos4;
        pos3 = e.clientX;
        pos4 = e.clientY;
        
        element.style.top = (element.offsetTop + dy) + "px";
        element.style.left = (element.offsetLeft + dx) + "px";
    }

    function closeDragElement() {
        document.onmouseup = null;
        document.onmousemove = null;
    }
}

// Применяем функцию перетаскивания к форме и ее заголовку
const popupElement = document.getElementById("form-popup");
const dragHandle = document.querySelector(".drag-handle");
if (popupElement && dragHandle) {
    makeDraggable(popupElement, dragHandle);
}

</script>

</body>
</html>